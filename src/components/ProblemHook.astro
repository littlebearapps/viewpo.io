---
import Section from './Section.astro';

interface PainSolutionPair {
  pain: {
    heading: string;
    body: string;
  };
  solution: {
    title: string;
    slug: string;
    hook: string;
    personas: string[];
    icon: string;
    accentColour: string;
    iconBg: string;
    cardBg: string;
    borderColour: string;
  };
}

const pairs: PainSolutionPair[] = [
  {
    pain: {
      heading: '"Everyone needs to sign off"',
      body: "The head of sales wants to see the desktop layout. The designer needs to check mobile. The client wants the tablet view. You're chasing approvals across email, Slack, and video calls — and everyone's looking at different versions.",
    },
    solution: {
      title: 'Client Feedback',
      slug: '/use-cases/client-feedback/',
      hook: 'Send one share link. Everyone sees the design at the right viewport — no Viewpo account required. Clients, designers, and managers all review the same build.',
      personas: ['Agency', 'Team Lead', 'QA & Design'],
      icon: '<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />',
      accentColour: 'text-emerald-400',
      iconBg: 'bg-emerald-500/20 dark:bg-emerald-400/15',
      cardBg: 'bg-emerald-50/70 dark:bg-emerald-500/[0.07]',
      borderColour: 'border-emerald-200/60 dark:border-emerald-500/15',
    },
  },
  {
    pain: {
      heading: '"I deployed it — does it actually look right?"',
      body: "You merged a PR on the train and can't check the desktop layout. Or you generated a landing page with Cursor and aren't sure the responsive breakpoints are right. Or you're coding on a VPS in tmux — there's no localhost, and the only way to see your work is after it deploys. The build succeeded. But you need to see it.",
    },
    solution: {
      title: 'Visual QA Audit',
      slug: '/use-cases/responsive-testing/',
      hook: 'Real CSS viewport simulation — see a 1920px desktop layout on your phone. Whether you wrote the CSS or an AI did, media queries fire at the target width. Cycle through 6 presets in 10 seconds and verify every breakpoint.',
      personas: ['Remote Dev', 'Creator', 'iPad Dev'],
      icon: '<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />',
      accentColour: 'text-pink-400',
      iconBg: 'bg-pink-500/20 dark:bg-pink-400/15',
      cardBg: 'bg-pink-50/70 dark:bg-pink-500/[0.07]',
      borderColour: 'border-pink-200/60 dark:border-pink-500/15',
    },
  },
  {
    pain: {
      heading: '"I just saw the website and it\'s wrong"',
      body: "A client messages you at 9pm — the hero image is cropped on desktop. Or your CEO spots a typo on the pricing page. You push a fix, but now you need to verify it actually worked at every screen size. You're not at your laptop, and nobody else should see it until you've checked.",
    },
    solution: {
      title: 'Emergency Hotfix',
      slug: '/use-cases/production-monitoring/',
      hook: 'Push notification arrives when the build succeeds. Tap it to open the deploy at 1920px desktop resolution. Verify the fix in under 60 seconds — without opening your laptop.',
      personas: ['Remote Dev', 'Team Lead'],
      icon: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />',
      accentColour: 'text-amber-400',
      iconBg: 'bg-amber-500/20 dark:bg-amber-400/15',
      cardBg: 'bg-amber-50/70 dark:bg-amber-500/[0.07]',
      borderColour: 'border-amber-200/60 dark:border-amber-500/15',
    },
  },
  {
    pain: {
      heading: '"How do I show this to the room?"',
      body: "You're in a meeting and someone asks to see the latest build. You pull out your phone, but they see a tiny mobile layout. There's no way to show the desktop version, and no quick way to get it on everyone else's screen.",
    },
    solution: {
      title: 'Live Demo',
      slug: '/use-cases/live-demos/',
      hook: 'Open Viewpo, load the deploy at 1920px desktop resolution on your phone. Switch presets live. Generate a QR code so everyone in the room can scan and see it on their own device.',
      personas: ['Indie Founder', 'Team Lead', 'Agency'],
      icon: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6" />',
      accentColour: 'text-violet-400',
      iconBg: 'bg-violet-500/20 dark:bg-violet-400/15',
      cardBg: 'bg-violet-50/70 dark:bg-violet-500/[0.07]',
      borderColour: 'border-violet-200/60 dark:border-violet-500/15',
    },
  },
];
---

<Section id="problem">
  <div class="max-w-5xl mx-auto">
    <!-- Section header -->
    <div class="reveal mb-10 text-center">
      <h2 class="font-heading font-bold text-2xl md:text-3xl mb-3">
        Sound familiar?
      </h2>
      <p class="text-foreground/50 text-base md:text-lg max-w-2xl mx-auto leading-relaxed">
        Preview deployments are scattered across providers, dashboards, and browser tabs. Here's what that looks like — and how Viewpo fixes each one.
      </p>
    </div>

    <!-- Pain → Solution pairs -->
    <div class="space-y-4 md:space-y-5">
      {pairs.map((pair, i) => (
        <div class={`reveal reveal-delay-${Math.min(i + 1, 4)} rounded-2xl border border-neutral-200/80 dark:border-neutral-700/50 overflow-hidden`}>
          <div class="grid grid-cols-1 md:grid-cols-2">
            {/* Pain side */}
            <div class="p-5 md:p-6 bg-white/40 dark:bg-white/[0.02]">
              <p class="text-[11px] font-heading font-semibold uppercase tracking-wider text-foreground/30 dark:text-white/25 mb-2">The problem</p>
              <h3 class="font-heading font-semibold text-base md:text-lg text-neutral-800 dark:text-neutral-200 mb-2 italic">
                {pair.pain.heading}
              </h3>
              <p class="text-sm text-foreground/50 leading-relaxed">
                {pair.pain.body}
              </p>
            </div>

            {/* Solution side — tinted with accent colour */}
            <div class={`p-5 md:p-6 ${pair.solution.cardBg} border-t md:border-t-0 md:border-l ${pair.solution.borderColour}`}>
              <div class="flex items-center gap-3 mb-3">
                <div class={`w-8 h-8 rounded-lg ${pair.solution.iconBg} flex items-center justify-center flex-shrink-0`}>
                  <svg class={`w-4 h-4 ${pair.solution.accentColour}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <Fragment set:html={pair.solution.icon} />
                  </svg>
                </div>
                <div>
                  <p class={`text-[11px] font-heading font-semibold uppercase tracking-wider ${pair.solution.accentColour} opacity-70 mb-0.5`}>The fix</p>
                  <h4 class="font-heading font-semibold text-sm text-neutral-800 dark:text-neutral-200">
                    {pair.solution.title}
                  </h4>
                </div>
              </div>
              <p class="text-sm text-foreground/50 leading-relaxed mb-3">
                {pair.solution.hook}
              </p>
              <div class="flex items-center justify-between gap-3">
                <div class="flex flex-wrap gap-1.5">
                  {pair.solution.personas.map((persona) => (
                    <span class="inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium bg-foreground/[0.04] dark:bg-white/[0.05] text-foreground/40 dark:text-white/35 border border-foreground/[0.04] dark:border-white/[0.04]">
                      {persona}
                    </span>
                  ))}
                </div>
                <a
                  href={pair.solution.slug}
                  class={`inline-flex items-center gap-1 text-xs font-heading font-medium ${pair.solution.accentColour} hover:opacity-80 transition-opacity whitespace-nowrap group`}
                >
                  Read more
                  <svg class="w-3 h-3 transition-transform group-hover:translate-x-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</Section>
