---
import Section from './Section.astro';
import Button from './Button.astro';
import { PRICING_TIERS } from '@utils/constants';
---

<Section id="pricing">
  <div class="text-center mb-16">
    <h2 class="font-heading font-bold text-3xl md:text-4xl mb-4 reveal">Simple, Transparent Pricing</h2>
    <p class="text-foreground/60 text-lg max-w-2xl mx-auto reveal reveal-delay-1">
      Start free. Upgrade when you need more projects, providers, or team features.
    </p>
  </div>

  <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
    {PRICING_TIERS.map((tier, i) => (
      <div
        class:list={[
          `reveal reveal-delay-${i + 1} rounded-2xl p-6 md:p-8 border flex flex-col`,
          tier.highlighted
            ? 'border-primary bg-primary/5 dark:bg-primary/10 relative'
            : 'border-foreground/10 dark:border-white/10 bg-white dark:bg-slate-800/50',
        ]}
      >
        {tier.highlighted && (
          <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-white text-xs font-heading font-semibold px-3 py-1 rounded-full">
            Most Popular
          </div>
        )}

        <div class="mb-6">
          <h3 class="font-heading font-semibold text-xl mb-2">{tier.name}</h3>
          <div class="flex items-baseline gap-1 mb-2">
            <span class="font-heading font-bold text-4xl">{tier.price}</span>
            <span class="text-foreground/50 text-sm">{tier.period}</span>
          </div>
          <p class="text-foreground/60 text-sm">{tier.description}</p>
        </div>

        <ul class="flex-1 space-y-3 mb-8">
          {tier.features.map((feature) => (
            <li class="flex items-start gap-2 text-sm">
              <svg class="w-5 h-5 text-success flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
              </svg>
              <span class="text-foreground/70">{feature}</span>
            </li>
          ))}
        </ul>

        <Button
          href="#cta"
          variant={tier.highlighted ? 'primary' : 'outline'}
          class={`w-full justify-center plausible-event-name=Pricing+${tier.name}`}
        >
          {tier.cta}
        </Button>
      </div>
    ))}
  </div>
</Section>
