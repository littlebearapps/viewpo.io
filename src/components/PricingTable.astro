---
import Section from './Section.astro';
import { PRICING_TIERS } from '@utils/constants';
---

<Section id="pricing">
  <div class="text-center mb-16">
    <h2 class="font-heading font-bold text-3xl md:text-4xl mb-4 reveal">Simple, Transparent Pricing</h2>
    <p class="text-foreground/60 dark:text-neutral-400 text-lg max-w-2xl mx-auto reveal reveal-delay-1">
      Start free. Upgrade when you need more projects, providers, or team features.
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-5 max-w-5xl mx-auto items-stretch">
    {PRICING_TIERS.map((tier, i) => (
      <div
        class:list={[
          `reveal reveal-delay-${i + 1} relative rounded-lg p-6 md:p-8 flex flex-col border`,
          tier.highlighted
            ? 'border-sky-500/50 dark:border-sky-400/40 bg-white/70 dark:bg-neutral-900/70 shadow-[0_0_30px_-8px_rgba(56,189,248,0.2)] dark:shadow-[0_0_30px_-8px_rgba(56,189,248,0.15)]'
            : 'border-neutral-200 dark:border-neutral-800 bg-white/50 dark:bg-neutral-900/50',
          'backdrop-blur-sm',
        ]}
      >
        {/* Most Popular badge */}
        {tier.highlighted && (
          <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-sky-500 dark:bg-sky-400 text-white dark:text-neutral-950 text-[11px] font-heading font-bold uppercase tracking-wider px-3 py-1 rounded-full z-10">
            Most Popular
          </div>
        )}

        <div class="mb-6">
          <h3 class="font-heading font-semibold text-lg mb-3 text-foreground dark:text-white">{tier.name}</h3>
          <div class="flex items-baseline gap-1.5 mb-2">
            <span class="font-mono font-bold text-4xl text-foreground dark:text-white">{tier.price}</span>
            <span class="text-foreground/40 dark:text-neutral-500 text-sm">{tier.period}</span>
          </div>
          <p class="text-foreground/50 dark:text-neutral-500 text-sm">{tier.description}</p>
        </div>

        <ul class="flex-1 space-y-3 mb-8">
          {tier.features.map((feature) => (
            <li class="flex items-start gap-2.5 text-sm">
              <svg class="w-4 h-4 text-primary flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
              </svg>
              <span class="text-foreground/65 dark:text-neutral-400">{feature}</span>
            </li>
          ))}
        </ul>

        <button
          type="button"
          {...(tier.name === 'Free' ? { 'data-open-signup': '' } : { 'data-open-signup': 'notify' })}
          class:list={[
            'w-full justify-center inline-flex items-center gap-2 font-heading font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:scale-[1.02] active:scale-[0.98] px-6 py-3 text-sm',
            tier.highlighted
              ? 'bg-primary text-white hover:bg-primary-hover focus:ring-primary shadow-md hover:shadow-lg'
              : 'border border-neutral-300 dark:border-neutral-700 text-foreground dark:text-neutral-300 hover:bg-foreground/5 dark:hover:bg-white/5 focus:ring-primary/50',
            `plausible-event-name=Pricing+${tier.name}`,
          ]}
        >
          {tier.cta}
        </button>
      </div>
    ))}
  </div>
</Section>
